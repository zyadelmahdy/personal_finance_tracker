{% load static %}
{% load profile_extras %}

<nav class="bg-white shadow hidden md:block">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <div class="flex h-16 items-center justify-between">
      <!-- Logo -->
      <div class="flex-shrink-0">
        <a
          href="{% url 'index' %}"
          class="text-xl font-bold text-[#0f1416] hover:text-blue-600 transition"
        >
          FinTrack
        </a>
      </div>
      <!-- Nav Items and Profile Pic -->
      <div class="flex items-center">
        <div class="flex flex-row items-center space-x-8">
          <a href="{% url 'transactions' %}" class="text-sm font-medium text-[#0f1416] hover:text-gray-700 transition {% if active_page == 'transactions' %} !text-gray-700 {% endif %}">Transactions</a>
          <a href="{% url 'budgets' %}" class="text-sm font-medium text-[#0f1416] hover:text-gray-700 transition {% if active_page == 'budgets' %} !text-gray-700 {% endif %}">Budgets</a>
          <a href="{% url 'categories' %}" class="text-sm font-medium text-[#0f1416] hover:text-gray-700 transition {% if active_page == 'categories' %} !text-gray-700 {% endif %}">Categories</a>
          <a href="{% url 'methods' %}" class="text-sm font-medium text-[#0f1416] hover:text-gray-700 transition {% if active_page == 'method' %} !text-gray-700 {% endif %}">Payment Methods</a>
          <a href="{% url 'reports' %}" class="text-sm font-medium text-[#0f1416] hover:text-gray-700 transition {% if active_page == 'reports' %} !text-gray-700 {% endif %}">Reports</a>
        </div>
        <!-- Profile Pic -->
        <a href="{% url 'settings' %}" class="ml-4 {% if active_page == 'settings' %} !border-gray-500 {% endif %}">
          <img
            src="{% if user.profile.image|image_exists %}{{ user.profile.image.url }}?v={{ user.profile.image.url|default:''|cut:'/'|length }}{% else %}{% static 'finance_tracker_app/images/profile_pic.png' %}{% endif %}"
            alt="Profile"
            class="h-10 w-10 rounded-full object-cover border-2 border-gray-200 hover:border-gray-500 transition {% if active_page == 'settings' %} !border-gray-500 {% endif %}"
          />
        </a>
      </div>
    </div>
  </div>
</nav>

<!-- Bottom Toolbar for Mobile -->
<nav class="md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-[100] w-full overflow-x-hidden">
  <div class="flex justify-between items-center px-2 py-1 w-full">
    <a href="{% url 'transactions' %}" class="flex flex-col items-center flex-1 min-w-0 py-2 active:bg-gray-100 active:shadow {% if active_page == 'transactions' %}text-blue-600{% else %}text-gray-500{% endif %}">
      <span class="material-icons flex-shrink-0">receipt_long</span>
      <span class="text-xs truncate">Transactions</span>
    </a>
    <a href="{% url 'budgets' %}" class="flex flex-col items-center flex-1 min-w-0 py-2 active:bg-gray-100 active:shadow {% if active_page == 'budgets' %}text-blue-600{% else %}text-gray-500{% endif %}">
      <span class="material-icons flex-shrink-0">account_balance_wallet</span>
      <span class="text-xs truncate">Budgets</span>
    </a>
    <a href="{% url 'index' %}" class="flex flex-col items-center flex-1 min-w-0 py-2 active:bg-gray-100 active:shadow {% if active_page == 'index' %}text-blue-600{% else %}text-gray-500{% endif %}">
      <span class="material-icons flex-shrink-0">home</span>
      <span class="text-xs truncate">Home</span>
    </a>
    <a href="{% url 'reports' %}" class="flex flex-col items-center flex-1 min-w-0 py-2 active:bg-gray-100 active:shadow {% if active_page == 'reports' %}text-blue-600{% else %}text-gray-500{% endif %}">
      <span class="material-icons flex-shrink-0">bar_chart</span>
      <span class="text-xs truncate">Reports</span>
    </a>
    <a href="{% url 'settings' %}" class="flex flex-col items-center flex-1 min-w-0 py-2 active:bg-gray-100 active:shadow {% if active_page == 'settings' %}text-blue-600{% else %}text-gray-500{% endif %}">
      <span class="material-icons flex-shrink-0">person</span>
      <span class="text-xs truncate">Profile</span>
    </a>
  </div>
</nav>
